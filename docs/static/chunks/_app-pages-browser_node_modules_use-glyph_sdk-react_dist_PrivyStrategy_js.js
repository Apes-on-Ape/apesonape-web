"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_node_modules_use-glyph_sdk-react_dist_PrivyStrategy_js"],{

/***/ "(app-pages-browser)/./node_modules/@use-glyph/sdk-react/dist/PrivyStrategy.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@use-glyph/sdk-react/dist/PrivyStrategy.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ is)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-runtime.js\");\n/* harmony import */ var _privy_io_react_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @privy-io/react-auth */ \"(app-pages-browser)/./node_modules/@privy-io/react-auth/dist/esm/usePrivy-BSIhOAz8.mjs\");\n/* harmony import */ var _privy_io_react_auth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @privy-io/react-auth */ \"(app-pages-browser)/./node_modules/@privy-io/react-auth/dist/esm/index-CCrVHfyv.mjs\");\n/* harmony import */ var _privy_io_react_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @privy-io/react-auth */ \"(app-pages-browser)/./node_modules/@privy-io/react-auth/dist/esm/useWallets-DuxHKVvE.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.js */ \"(app-pages-browser)/./node_modules/@use-glyph/sdk-react/dist/index.js\");\n/* harmony import */ var wagmi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! wagmi */ \"(app-pages-browser)/./node_modules/wagmi/dist/esm/hooks/useChainId.js\");\n\n\n\n\n\nconst t = (0,_index_js__WEBPACK_IMPORTED_MODULE_2__.c)(\"PrivyStrategy\"), es = ({ children: x, glyphUrl: p, onLogin: m, onLogout: v, useStagingTenant: u }) => {\n  const [D, y] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0), [L, g] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null), [a, F] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null), [n, R] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1), P = (0,wagmi__WEBPACK_IMPORTED_MODULE_3__.useChainId)(), {\n    ready: o,\n    authenticated: i,\n    user: c,\n    getAccessToken: _,\n    login: w,\n    logout: f,\n    signMessage: b,\n    sendTransaction: G\n  } = (0,_privy_io_react_auth__WEBPACK_IMPORTED_MODULE_4__.u)(), { signMessage: E, sendTransaction: I } = (0,_privy_io_react_auth__WEBPACK_IMPORTED_MODULE_5__.ae)();\n  t.debug(o, i, !!c);\n  const { wallets: V } = (0,_privy_io_react_auth__WEBPACK_IMPORTED_MODULE_6__.u)();\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (!o) {\n      g(null), y(!0);\n      return;\n    }\n    if (!i || !c) {\n      g(null), y(!1);\n      return;\n    }\n    let e;\n    const r = c.linkedAccounts?.find(\n      (s) => s.type === \"wallet\" && s.chainType === \"ethereum\" && s.walletClientType === \"privy\"\n    ), S = r && (0,_index_js__WEBPACK_IMPORTED_MODULE_2__.i)(r.address);\n    S && t.debug(\"Privy (main) EVM embedded wallet\", r.address), t.debug(\"finding cross-app accounts...\");\n    const T = c.linkedAccounts?.filter?.((s) => s.type === \"cross_app\") || [], W = T.filter(\n      (s) => s.providerApp?.id !== (u ? _index_js__WEBPACK_IMPORTED_MODULE_2__.S : _index_js__WEBPACK_IMPORTED_MODULE_2__.G)\n    );\n    t.debug(\"linked accounts - non-Glyph\", { accounts: W });\n    const h = W.map((s) => s.embeddedWallets[0].address);\n    h.length > 0 && (e = h[0], t.log(\"using cross_app (non-Glyph) account\"), h.length > 1 && t.warn(\"too many cross_app accounts\"));\n    const k = T.filter(\n      (s) => s.providerApp?.id === (u ? _index_js__WEBPACK_IMPORTED_MODULE_2__.S : _index_js__WEBPACK_IMPORTED_MODULE_2__.G)\n    );\n    t.debug(\"linked accounts - Glyph\", { accounts: k });\n    const A = k.map((s) => s.embeddedWallets[0].address);\n    A.length > 0 && (e = A[0], t.log(\"using cross_app (Glyph) account\"), A.length > 1 && t.warn(\"too many cross_app accounts\")), e ? (R(!0), t.log(\"using cross_app account\", e)) : S && (e = r.address, t.log(\"using Privy (main) EVM embedded wallet\", e)), F(e ?? null), (async () => {\n      if (!e) {\n        t.error(\"user has no wallet\");\n        return;\n      }\n      const s = (0,_index_js__WEBPACK_IMPORTED_MODULE_2__.b)(\n        p || _index_js__WEBPACK_IMPORTED_MODULE_2__.W,\n        async () => await _(),\n        { \"x-evm-address\": e }\n      );\n      g(() => s), y(!1);\n    })();\n  }, [\n    p,\n    i,\n    o,\n    c,\n    u,\n    n,\n    V,\n    a,\n    _,\n    f\n  ]);\n  const Y = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {\n    await w(), m?.();\n  }, [m, w]), N = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async () => {\n    f(), v?.();\n  }, [v, f]), U = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    async ({ message: e }) => {\n      if (!a) throw new Error(\"No wallet address found\");\n      return n ? E(e, { address: a }) : b({ message: e });\n    },\n    [a, n, E, b]\n  ), H = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(\n    async ({ transaction: e }) => {\n      if (!a) throw new Error(\"No wallet address found\");\n      const r = { ...e, chainId: P };\n      return n ? I(r, { address: a }) : G(r, { address: a });\n    },\n    [P, n, a, I, G]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    _index_js__WEBPACK_IMPORTED_MODULE_2__.a.Provider,\n    {\n      value: {\n        ready: o && !D,\n        authenticated: o && i,\n        glyphUrl: p,\n        // Pass as string to avoid type error (we are passing fallback value in useGlyph hook at a common place)\n        login: Y,\n        logout: N,\n        signMessage: U,\n        sendTransaction: H,\n        apiFetch: L\n      },\n      children: x\n    }\n  );\n}, is = (0,react__WEBPACK_IMPORTED_MODULE_1__.memo)(es);\n\n//# sourceMappingURL=PrivyStrategy.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AdXNlLWdseXBoL3Nkay1yZWFjdC9kaXN0L1ByaXZ5U3RyYXRlZ3kuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBNkM7QUFDbUQ7QUFDYjtBQUNDO0FBQzNDO0FBQ3pDLFVBQVUsNENBQUMsMkJBQTJCLHdFQUF3RTtBQUM5RyxpQkFBaUIsK0NBQUMsZUFBZSwrQ0FBQyxpQkFBaUIsK0NBQUMsaUJBQWlCLCtDQUFDLFVBQVUsaURBQUU7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksRUFBRSx1REFBQyxNQUFNLHFDQUFxQyxFQUFFLHdEQUFDO0FBQ3JEO0FBQ0EsVUFBVSxhQUFhLEVBQUUsdURBQUM7QUFDMUIsRUFBRSxnREFBQztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNENBQUM7QUFDakI7QUFDQTtBQUNBLHdDQUF3Qyx3Q0FBQyxHQUFHLHdDQUFDO0FBQzdDO0FBQ0EsNkNBQTZDLGFBQWE7QUFDMUQ7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHdDQUFDLEdBQUcsd0NBQUM7QUFDN0M7QUFDQSx5Q0FBeUMsYUFBYTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsNENBQUM7QUFDakIsYUFBYSx3Q0FBQztBQUNkO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtEQUFDO0FBQ2I7QUFDQSxHQUFHLGVBQWUsa0RBQUM7QUFDbkI7QUFDQSxHQUFHLGVBQWUsa0RBQUM7QUFDbkIsYUFBYSxZQUFZO0FBQ3pCO0FBQ0Esd0JBQXdCLFlBQVksUUFBUSxZQUFZO0FBQ3hELEtBQUs7QUFDTDtBQUNBLFNBQVMsa0RBQUM7QUFDVixhQUFhLGdCQUFnQjtBQUM3QjtBQUNBLGtCQUFrQjtBQUNsQix3QkFBd0IsWUFBWSxXQUFXLFlBQVk7QUFDM0QsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUM7QUFDMUIsSUFBSSx3Q0FBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxPQUFPLDJDQUFDO0FBR1A7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzZWJhc1xcRG9jdW1lbnRzXFxHaXQgUHJvamVjdHNcXGFwZXNvbmFwZS13ZWJcXG5vZGVfbW9kdWxlc1xcQHVzZS1nbHlwaFxcc2RrLXJlYWN0XFxkaXN0XFxQcml2eVN0cmF0ZWd5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCBhcyBqIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyB1c2VQcml2eSBhcyBCLCB1c2VDcm9zc0FwcEFjY291bnRzIGFzICQsIHVzZVdhbGxldHMgYXMgcSB9IGZyb20gXCJAcHJpdnktaW8vcmVhY3QtYXV0aFwiO1xuaW1wb3J0IHsgbWVtbyBhcyB6LCB1c2VTdGF0ZSBhcyBkLCB1c2VFZmZlY3QgYXMgSiwgdXNlQ2FsbGJhY2sgYXMgbCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgYyBhcyBLLCBpIGFzIE8sIFMgYXMgQywgRyBhcyBNLCBhIGFzIFEsIGIgYXMgWCwgVyBhcyBaIH0gZnJvbSBcIi4vaW5kZXguanNcIjtcbmltcG9ydCB7IHVzZUNoYWluSWQgYXMgc3MgfSBmcm9tIFwid2FnbWlcIjtcbmNvbnN0IHQgPSBLKFwiUHJpdnlTdHJhdGVneVwiKSwgZXMgPSAoeyBjaGlsZHJlbjogeCwgZ2x5cGhVcmw6IHAsIG9uTG9naW46IG0sIG9uTG9nb3V0OiB2LCB1c2VTdGFnaW5nVGVuYW50OiB1IH0pID0+IHtcbiAgY29uc3QgW0QsIHldID0gZCghMCksIFtMLCBnXSA9IGQobnVsbCksIFthLCBGXSA9IGQobnVsbCksIFtuLCBSXSA9IGQoITEpLCBQID0gc3MoKSwge1xuICAgIHJlYWR5OiBvLFxuICAgIGF1dGhlbnRpY2F0ZWQ6IGksXG4gICAgdXNlcjogYyxcbiAgICBnZXRBY2Nlc3NUb2tlbjogXyxcbiAgICBsb2dpbjogdyxcbiAgICBsb2dvdXQ6IGYsXG4gICAgc2lnbk1lc3NhZ2U6IGIsXG4gICAgc2VuZFRyYW5zYWN0aW9uOiBHXG4gIH0gPSBCKCksIHsgc2lnbk1lc3NhZ2U6IEUsIHNlbmRUcmFuc2FjdGlvbjogSSB9ID0gJCgpO1xuICB0LmRlYnVnKG8sIGksICEhYyk7XG4gIGNvbnN0IHsgd2FsbGV0czogViB9ID0gcSgpO1xuICBKKCgpID0+IHtcbiAgICBpZiAoIW8pIHtcbiAgICAgIGcobnVsbCksIHkoITApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWkgfHwgIWMpIHtcbiAgICAgIGcobnVsbCksIHkoITEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgZTtcbiAgICBjb25zdCByID0gYy5saW5rZWRBY2NvdW50cz8uZmluZChcbiAgICAgIChzKSA9PiBzLnR5cGUgPT09IFwid2FsbGV0XCIgJiYgcy5jaGFpblR5cGUgPT09IFwiZXRoZXJldW1cIiAmJiBzLndhbGxldENsaWVudFR5cGUgPT09IFwicHJpdnlcIlxuICAgICksIFMgPSByICYmIE8oci5hZGRyZXNzKTtcbiAgICBTICYmIHQuZGVidWcoXCJQcml2eSAobWFpbikgRVZNIGVtYmVkZGVkIHdhbGxldFwiLCByLmFkZHJlc3MpLCB0LmRlYnVnKFwiZmluZGluZyBjcm9zcy1hcHAgYWNjb3VudHMuLi5cIik7XG4gICAgY29uc3QgVCA9IGMubGlua2VkQWNjb3VudHM/LmZpbHRlcj8uKChzKSA9PiBzLnR5cGUgPT09IFwiY3Jvc3NfYXBwXCIpIHx8IFtdLCBXID0gVC5maWx0ZXIoXG4gICAgICAocykgPT4gcy5wcm92aWRlckFwcD8uaWQgIT09ICh1ID8gQyA6IE0pXG4gICAgKTtcbiAgICB0LmRlYnVnKFwibGlua2VkIGFjY291bnRzIC0gbm9uLUdseXBoXCIsIHsgYWNjb3VudHM6IFcgfSk7XG4gICAgY29uc3QgaCA9IFcubWFwKChzKSA9PiBzLmVtYmVkZGVkV2FsbGV0c1swXS5hZGRyZXNzKTtcbiAgICBoLmxlbmd0aCA+IDAgJiYgKGUgPSBoWzBdLCB0LmxvZyhcInVzaW5nIGNyb3NzX2FwcCAobm9uLUdseXBoKSBhY2NvdW50XCIpLCBoLmxlbmd0aCA+IDEgJiYgdC53YXJuKFwidG9vIG1hbnkgY3Jvc3NfYXBwIGFjY291bnRzXCIpKTtcbiAgICBjb25zdCBrID0gVC5maWx0ZXIoXG4gICAgICAocykgPT4gcy5wcm92aWRlckFwcD8uaWQgPT09ICh1ID8gQyA6IE0pXG4gICAgKTtcbiAgICB0LmRlYnVnKFwibGlua2VkIGFjY291bnRzIC0gR2x5cGhcIiwgeyBhY2NvdW50czogayB9KTtcbiAgICBjb25zdCBBID0gay5tYXAoKHMpID0+IHMuZW1iZWRkZWRXYWxsZXRzWzBdLmFkZHJlc3MpO1xuICAgIEEubGVuZ3RoID4gMCAmJiAoZSA9IEFbMF0sIHQubG9nKFwidXNpbmcgY3Jvc3NfYXBwIChHbHlwaCkgYWNjb3VudFwiKSwgQS5sZW5ndGggPiAxICYmIHQud2FybihcInRvbyBtYW55IGNyb3NzX2FwcCBhY2NvdW50c1wiKSksIGUgPyAoUighMCksIHQubG9nKFwidXNpbmcgY3Jvc3NfYXBwIGFjY291bnRcIiwgZSkpIDogUyAmJiAoZSA9IHIuYWRkcmVzcywgdC5sb2coXCJ1c2luZyBQcml2eSAobWFpbikgRVZNIGVtYmVkZGVkIHdhbGxldFwiLCBlKSksIEYoZSA/PyBudWxsKSwgKGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghZSkge1xuICAgICAgICB0LmVycm9yKFwidXNlciBoYXMgbm8gd2FsbGV0XCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzID0gWChcbiAgICAgICAgcCB8fCBaLFxuICAgICAgICBhc3luYyAoKSA9PiBhd2FpdCBfKCksXG4gICAgICAgIHsgXCJ4LWV2bS1hZGRyZXNzXCI6IGUgfVxuICAgICAgKTtcbiAgICAgIGcoKCkgPT4gcyksIHkoITEpO1xuICAgIH0pKCk7XG4gIH0sIFtcbiAgICBwLFxuICAgIGksXG4gICAgbyxcbiAgICBjLFxuICAgIHUsXG4gICAgbixcbiAgICBWLFxuICAgIGEsXG4gICAgXyxcbiAgICBmXG4gIF0pO1xuICBjb25zdCBZID0gbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdygpLCBtPy4oKTtcbiAgfSwgW20sIHddKSwgTiA9IGwoYXN5bmMgKCkgPT4ge1xuICAgIGYoKSwgdj8uKCk7XG4gIH0sIFt2LCBmXSksIFUgPSBsKFxuICAgIGFzeW5jICh7IG1lc3NhZ2U6IGUgfSkgPT4ge1xuICAgICAgaWYgKCFhKSB0aHJvdyBuZXcgRXJyb3IoXCJObyB3YWxsZXQgYWRkcmVzcyBmb3VuZFwiKTtcbiAgICAgIHJldHVybiBuID8gRShlLCB7IGFkZHJlc3M6IGEgfSkgOiBiKHsgbWVzc2FnZTogZSB9KTtcbiAgICB9LFxuICAgIFthLCBuLCBFLCBiXVxuICApLCBIID0gbChcbiAgICBhc3luYyAoeyB0cmFuc2FjdGlvbjogZSB9KSA9PiB7XG4gICAgICBpZiAoIWEpIHRocm93IG5ldyBFcnJvcihcIk5vIHdhbGxldCBhZGRyZXNzIGZvdW5kXCIpO1xuICAgICAgY29uc3QgciA9IHsgLi4uZSwgY2hhaW5JZDogUCB9O1xuICAgICAgcmV0dXJuIG4gPyBJKHIsIHsgYWRkcmVzczogYSB9KSA6IEcociwgeyBhZGRyZXNzOiBhIH0pO1xuICAgIH0sXG4gICAgW1AsIG4sIGEsIEksIEddXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8gaihcbiAgICBRLlByb3ZpZGVyLFxuICAgIHtcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIHJlYWR5OiBvICYmICFELFxuICAgICAgICBhdXRoZW50aWNhdGVkOiBvICYmIGksXG4gICAgICAgIGdseXBoVXJsOiBwLFxuICAgICAgICAvLyBQYXNzIGFzIHN0cmluZyB0byBhdm9pZCB0eXBlIGVycm9yICh3ZSBhcmUgcGFzc2luZyBmYWxsYmFjayB2YWx1ZSBpbiB1c2VHbHlwaCBob29rIGF0IGEgY29tbW9uIHBsYWNlKVxuICAgICAgICBsb2dpbjogWSxcbiAgICAgICAgbG9nb3V0OiBOLFxuICAgICAgICBzaWduTWVzc2FnZTogVSxcbiAgICAgICAgc2VuZFRyYW5zYWN0aW9uOiBILFxuICAgICAgICBhcGlGZXRjaDogTFxuICAgICAgfSxcbiAgICAgIGNoaWxkcmVuOiB4XG4gICAgfVxuICApO1xufSwgaXMgPSB6KGVzKTtcbmV4cG9ydCB7XG4gIGlzIGFzIGRlZmF1bHRcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcml2eVN0cmF0ZWd5LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@use-glyph/sdk-react/dist/PrivyStrategy.js\n"));

/***/ })

}]);