"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2696],{11776:(e,t,n)=>{n.d(t,{D:()=>l,M:()=>r});var a=n(95155),s=n(16873);let i=({data:e})=>{let t=e=>"object"==typeof e&&null!==e?(0,a.jsx)(o,{children:Object.entries(e).map(([e,n])=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("strong",{children:[e,":"]})," ",t(n)]},e))}):(0,a.jsx)("span",{children:String(e)});return(0,a.jsx)("div",{children:t(e)})},r=s.I4.div.withConfig({displayName:"Message",componentId:"sc-70ec2a4f-0"})(["margin-top:1.5rem;background-color:var(--privy-color-background-2);border-radius:var(--privy-border-radius-md);padding:12px;text-align:left;max-height:310px;overflow:scroll;white-space:pre-wrap;width:100%;font-size:0.875rem;font-weight:400;color:var(--privy-color-foreground);line-height:1.5;-ms-overflow-style:none;scrollbar-width:none;&::-webkit-scrollbar{display:none;}"]),o=s.I4.ul.withConfig({displayName:"MessageList",componentId:"sc-70ec2a4f-1"})(["margin-left:12px !important;white-space:nowrap;&:first-child{margin-left:0 !important;}strong{font-weight:500 !important;}"]),l=({data:e,className:t})=>(0,a.jsx)(r,{className:t,children:(0,a.jsx)(i,{data:e})})},19129:(e,t,n)=>{n.d(t,{f:()=>s});let a=2n**256n-1n,s=({amount:e,decimals:t})=>e===a?"Maximum":Intl.NumberFormat(void 0,{maximumFractionDigits:t}).format(Number(e)/10**t)},65924:(e,t,n)=>{n.d(t,{g:()=>r});var a=n(11326),s=n(96355),i=n(45244);let r=async({address:e,chain:t,rpcConfig:n,privyAppId:r})=>{try{let l=(0,a.l)({chain:t,transport:(0,s.L)((0,i.a)(t,n,r))}),[u,p]=await Promise.all([l.readContract({abi:o,address:e,functionName:"symbol"}),l.readContract({abi:o,address:e,functionName:"decimals"})]);return{decimals:p,symbol:u}}catch(e){return console.log(e),null}},o=[{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}]},52696:(e,t,n)=>{n.r(t),n.d(t,{SendTransactionScreen:()=>ei,default:()=>ei});var a=n(95155),s=n(12115),i=n(98979),r=n(75642),o=n(68424),l=n(11326),u=n(96355),p=n(69595),d=n(95967),c=n(52956),m=n(88338),y=n(22306),f=n(81084),b=n(84739),g=n(31679),h=n(5944),T=n(45409),v=n(46953),I=n(65924),x=n(19129),k=n(72173),M=n(48568),w=n(45244),E=n(79290),S=n(16873),_=n(40639),C=n(11776),N=n(85389),F=n(93659),j=n(59242),A=n(86777),O=n(60533),R=n(79450),B=n(24511);n(68943),n(29761),n(47147),n(89208),n(85243);let D=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],$=S.I4.div.withConfig({displayName:"Container",componentId:"sc-31acb2bc-0"})(["display:flex;flex-direction:column;min-height:72px;"]);var P=({onBack:e,details:t})=>(0,a.jsxs)($,{children:[(0,a.jsx)(_.M,{backFn:e}),(0,a.jsx)(C.D,{data:t}),(0,a.jsx)(_.B,{})]});let q=({gasUsed:e,effectiveGasPrice:t})=>{if(e&&t)try{return(0,i.nj)(e*t)}catch(e){return}},L=({txn:e,receipt:t,transactionInfo:n,onClose:s,tokenPrice:i,tokenSymbol:r,receiptHeader:o,receiptDescription:l})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.M,{onClose:s}),(0,a.jsx)(A.S,{title:o??"Transaction complete!",description:l??"You're all set."}),(0,a.jsx)(O.T,{tokenPrice:i,from:t.from,to:t.to,gas:q(t),txn:e,transactionInfo:n,tokenSymbol:r}),(0,a.jsx)(M.Y,{}),(0,a.jsx)(U,{loading:!1,onClick:s,children:"All Done"}),(0,a.jsx)(j.R,{}),(0,a.jsx)(_.B,{})]}),U=(0,S.I4)(F.P).withConfig({displayName:"SubmitButton",componentId:"sc-f70d0f7a-0"})(["&&{margin-top:24px;}transition:color 350ms ease,background-color 350ms ease;"]),V=[{constant:!1,inputs:[{name:"_salt",type:"bytes32"},{name:"_initializer",type:"bytes"}],name:"deployAccount",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],G=[{name:"from",type:"address"},{name:"param2",type:"address"},{name:"param3",type:"bytes"},{name:"param4",type:"tuple",components:[]},{type:"tuple",components:[{name:"param5",type:"address"},{name:"param6",type:"uint256"},{name:"param7",type:"uint256"},{name:"encodedInitData",type:"bytes"}]}],H=[{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],W=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"},{internalType:"uint256[]",name:"quantities",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"mintBatch",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"batchMint",outputs:[],stateMutability:"payable",type:"function"}],J=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],z=[{constant:!1,inputs:[{name:"_operator",type:"address"},{name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],K=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Y=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenIds",type:"uint256[]"},{name:"_amounts",type:"uint256[]"},{name:"_data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Z=[{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"},{name:"_amount",type:"uint256"},{name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Q=(e,t)=>{let n=X(H,e);if(n)return{action:"approve",functionName:"approve",isErc20Ish:!0,isNFTIsh:!1,spender:n.args[0],amount:n.args[1]};let a=X(R.E,e);if(a)return{action:"transfer",functionName:"transfer",isErc20Ish:!0,isNFTIsh:!1,transferTo:a.args[0],amount:a.args[1]};if(!t)return{action:"transaction",functionName:"",isErc20Ish:!1,isNFTIsh:!1};let s=X(V,e);if(s&&"string"==typeof s.args[1]){let e=ee(s.args[1]);if(e&&e[4].encodedInitData)return Q(e[4].encodedInitData,t)}let i=X(z,e);if(i)return{action:"approve",functionName:"setApprovalForAll",isNFTIsh:!0,isErc20Ish:!1,operator:i.args[0],approved:i.args[1]};let r=X(K,e);if(r)return{action:"transfer",functionName:"transferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:r.args[0],transferTo:r.args[1],tokenId:r.args[2]};let o=X(J,e);if(o)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:o.args[0],transferTo:o.args[1],tokenId:o.args[2]};let l=X(Z,e);if(l)return{action:"transfer",functionName:"safeTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:l.args[0],transferTo:l.args[1],tokenId:l.args[2],amount:l.args[3]};let u=X(Y,e);if(u)return{action:"batch transfer",functionName:"safeBatchTransferFrom",isNFTIsh:!0,isErc20Ish:!1,transferFrom:u.args[0],transferTo:u.args[1],tokenIds:u.args[2],amounts:u.args[3]};let p=X(W,e);return p?{action:"mint",functionName:p.functionName,isNFTIsh:!0,isErc20Ish:!1,args:p.args}:{action:"transaction",isErc20Ish:!1,isNFTIsh:!1}},X=(e,t)=>{try{let n=(0,r.J)({abi:e,data:t});return{functionName:n.functionName,args:n.args||[]}}catch(e){return null}},ee=e=>{try{if("string"==typeof e)return(0,o.n)(G,`0x${e.slice(10)}`)}catch(e){return null}},et=e=>`${parseFloat(e).toFixed(2)}`,en=(e,t,n,a)=>{let[i,r]=(0,s.useState)(null),{walletProxy:o}=(0,g.u)();return(0,s.useEffect)(()=>{i&&r(null),(async()=>{if(!o||!t)return null;let s=[],i=!0,r=await (0,B.p)(e,n,t,a).catch(t=>(t.message&&t.message.includes("Insufficient balance for transaction")||t.message&&t.message.includes("Insufficient funds for gas * price + value")||t.details&&t.details.includes("insufficient funds")?i=!1:s.push(t),e));return{tx:r,totalGasEstimate:r.gas,hasFunds:i,errors:s}})().then(r)},[e]),i},ea=new b.P(new b.j("There was an issue preparing your transaction",d.Z9.E32603_DEFAULT_INTERNAL_ERROR.eipCode)),es=(e,t)=>e?.sendTransaction?"transactionRequest"in e.sendTransaction?e.sendTransaction.transactionRequest:e.sendTransaction.transactionRequests[t]:void 0,ei={component:()=>{let{data:e,onUserCloseViaDialogOrKeybindRef:t,setModalData:n,navigate:i}=(0,h.a)(),{client:r,rpcConfig:o,chains:S,closePrivyModal:_,walletProxy:C,showFiatPrices:F}=(0,g.u)(),{user:j}=(0,h.u)(),A=(0,f.u)(),[O,R]=(0,s.useState)(0),[B,$]=(0,s.useState)(0),[q,U]=(0,s.useState)(es(e,O)),[V,G]=(0,s.useState)(null),[H,W]=(0,s.useState)(),[J,z]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(null),[Z,X]=(0,s.useState)(null),[ee,ei]=(0,s.useState)(null),[er,eo]=(0,s.useState)(void 0),[el,eu]=(0,s.useState)(void 0),[ep,ed]=(0,s.useState)(!1),[ec,em]=(0,s.useState)(!1),[ey,ef]=(0,s.useState)([]),[eb,eg]=(0,s.useState)([]),[eh,eT]=(0,s.useState)("uninitiated"),[ev,eI]=(0,s.useState)(void 0);if(!q||!e?.sendTransaction||!e?.sendTransaction)return(0,a.jsx)(E.ErrorScreenView,{error:Error("Invalid transaction request"),allowlistConfig:A.allowlistConfig,onRetry:()=>{e?.sendTransaction?.onFailure(ea),_({shouldCallAuthOnSuccess:!1})}});let{transactingWalletAddress:ex}=e.sendTransaction,ek=(0,s.useMemo)(()=>S.find(e=>Number(e.id)===Number(q.chainId)),[q.chainId]),eM=ek?.nativeCurrency.symbol??"ETH",ew=(0,s.useMemo)(()=>Q(q.data,!!A.embeddedWallets.extendedCalldataDecoding),[q.data]),{action:eE,isErc20Ish:eS,isNFTIsh:e_,functionName:eC}=ew,{toAddress:eN,tokenAddress:eF}=(0,s.useMemo)(()=>({toAddress:ew.isErc20Ish?ew.transferTo:q.to??void 0,tokenAddress:ew.isErc20Ish?q.to:void 0}),[ew]);(0,s.useEffect)(()=>{q.to&&ek&&eS&&(0,I.g)({address:q.to,chain:ek,rpcConfig:A.rpcConfig,privyAppId:A.id}).then(G).catch(console.error)},[q.to,ek]);let{tokenPrice:ej,isTokenPriceLoading:eA}=(0,T.u)(q.chainId),{balance:eO}=(0,v.u)({rpcConfig:A.rpcConfig,appId:A.id,address:ex,chain:ek}),eR=function({rpcConfig:e,appId:t,address:n,chain:a,tokenInfo:i}){let{chains:r}=(0,g.u)(),[o,p]=(0,s.useState)(null),[d,y]=(0,s.useState)(!1),f=(0,s.useMemo)(()=>{let n=a||r[0];if(n)return(0,l.l)({chain:a,transport:(0,u.L)((0,c.K9)(n,e,t))})},[a,e,t]),b=(0,s.useCallback)(async()=>{if(n&&f&&i.address)try{return y(!0),await f.readContract({address:i.address,abi:D,functionName:"balanceOf",args:[n]})}catch(e){console.error(e)}finally{y(!1)}},[f,n,i?.address,a]);return(0,s.useEffect)(()=>{b().then(e=>null!=e&&p(e))},[b]),{balance:o,isLoading:d&&null==o,formattedBalance:(0,m.NJ)({amount:o??BigInt(0),decimals:i.decimals})}}({rpcConfig:A.rpcConfig,appId:A.id,address:ex,tokenInfo:{address:eF||"",decimals:V?.decimals??18},chain:ek}),eB=(0,s.useMemo)(()=>(0,w.g)(Number(q.chainId),S,o,{appId:A.id}),[q.chainId,o]),eD=en(q,ex,eB,e?.sendTransaction?.prepareTransactionRequest);(0,s.useEffect)(()=>{U(es(e,O))},[O]),(0,s.useEffect)(()=>{e.sendTransaction?.getIsSponsored?e.sendTransaction.getIsSponsored().then(W).catch(console.error):W(!1)},[e.sendTransaction.getIsSponsored]);let e$=()=>{if(!J)return K?e?.sendTransaction?.onSuccess({hash:K}):ee||eD?.errors[0]?e?.sendTransaction?.onFailure(ee??eD?.errors[0]??ea):e?.sendTransaction?.onFailure(new b.P(new b.j("The user rejected the request",d.Z9.E4001_USER_REJECTED_REQUEST.eipCode))),_({shouldCallAuthOnSuccess:!1})};t.current=e$;let eP=!!(e.funding&&e.funding.supportedOptions.length>0),eq=(0,k.g)(BigInt(eD?.totalGasEstimate??0n),eM),eL=F&&ej?(0,k.a)(BigInt(eD?.totalGasEstimate??0n),ej):void 0,eU=(0,k.g)(eO??0n,eM,void 0,!0),eV=F&&ej?(0,k.a)(eO??0n,ej):void 0,eG=V&&!eR.isLoading&&eS&&"approve"!==eE?`${eR.formattedBalance} ${V.symbol}`:void 0,eH=e.sendTransaction?.uiOptions?.transactionInfo?.title;eH||(eH="approve"===eE?eS?"Confirm address":"Confirm action":`Approve ${eE}`);let eW=(0,s.useMemo)(()=>{if(e.sendTransaction?.uiOptions?.description)return e.sendTransaction?.uiOptions?.description;if("approve"===eE&&"setApprovalForAll"===eC&&ew.approved){let e=(0,a.jsx)(y.A,{address:ew.operator||"",url:ek?.blockExplorers?.default?.url});return(0,a.jsxs)(a.Fragment,{children:[A.name," would like your permission for ",e," to transfer tokens on your behalf."]})}if("approve"===eE&&"setApprovalForAll"===eC&&!ew.approved){let e=(0,a.jsx)(y.A,{address:ew.operator||"",url:ek?.blockExplorers?.default?.url});return(0,a.jsxs)(a.Fragment,{children:[A.name," would like your permission to revoke permissions of ",e," from transferring tokens on your behalf."]})}return eS&&"approve"===eE||eS&&"approve"===eE?`${A.name} would like your permission for ${(0,M.D)(ew.spender)} to spend tokens on your behalf.`:`${A.name} wants your permission to approve the following transaction.`},[A.name,eS,ew,e.sendTransaction?.uiOptions.description,eC]),eJ=e.sendTransaction?.uiOptions?.transactionInfo?.contractInfo?.imgUrl?(0,a.jsx)("img",{src:e.sendTransaction.uiOptions.transactionInfo.contractInfo.imgUrl,alt:e.sendTransaction.uiOptions.transactionInfo.contractInfo.imgAltText}):null,ez=!(!eD||eD.errors[0]||eD.hasFunds||!1!==H),eK=ez&&eP,eY=eK?"Add funds":e.sendTransaction?.uiOptions?.buttonText||(O<B?"Continue":"Approve"),eZ=e=>{if(!e)throw Error("Transaction scan failed");if("Success"===e.validation.status&&("Benign"===e.validation.result_type?eu("safe"):"Warning"===e.validation.result_type?eu("warn"):"Malicious"===e.validation.result_type&&(eu("error"),em(!0))),"Success"!==e.simulation.status)throw Error("Simulation failed");{eo(e.simulation.params);let{assetsIn:t,assetsOut:n}=function(e,t){let n=[],a=new Map;if(e){for(let t of e)if(t.in[0]){let e;e="ERC721"===t.asset.type||"approve_for_all"===t.in[0].value?{id:`nft:${t.asset.name}`,nftName:t.asset.name,nftCount:t.in.length}:{id:`token:${t.asset.type}:${t.asset.symbol}:${t.asset.name}`,iconUrl:t.asset.logo_url,value:t.in[0].value,symbol:t.asset.symbol,usdValue:t.in[0].usd_price?et(t.in[0].usd_price):void 0,decimals:t.asset.decimals},n.push(e)}else if(t.out[0]?.value){let e;e="ERC721"===t.asset.type||"approve_for_all"===t.out[0].value?{id:`nft:${t.asset.name}`,nftName:t.asset.name}:{id:`token:${t.asset.type}:${t.asset.symbol}:${t.asset.name}`,iconUrl:t.asset.logo_url,value:t.out[0].value,symbol:t.asset.symbol,usdValue:t.out[0].usd_price?et(t.out[0].usd_price):void 0,decimals:t.asset.decimals},a.has(e.id)||a.set(e.id,e)}}for(let e of t)for(let t of Object.keys(e.spenders)){let n;n="ERC721"===e.asset.type||"approve_for_all"===e.spenders[t]?.value?{id:`nft:${e.asset.name}`,nftName:e.asset.name}:{id:`token:${e.asset.type}:${e.asset.symbol}:${e.asset.name}`,iconUrl:e.asset.logo_url,value:e.spenders[t]?.value,symbol:e.asset.symbol,usdValue:e.spenders[t]?.usd_price?et(e.spenders[t]?.usd_price):void 0,decimals:e.asset.decimals},a.has(n.id)||a.set(n.id,n)}return{assetsIn:n,assetsOut:Array.from(a.values())}}(e.simulation.assets_diffs,e.simulation.exposures);if(0===n.length&&0===t.length)throw Error("No tokens found");ef(n),eg(t)}};if((0,s.useEffect)(()=>{e.sendTransaction?.scanTransaction&&A.embeddedWallets.transactionScanning.enabled&&"uninitiated"===eh&&(eT("in progress"),e.sendTransaction.scanTransaction().then(e=>{eZ(e),eT("completed")}).catch(()=>eT("failed")))},[!!e.sendTransaction?.scanTransaction]),(0,s.useEffect)(()=>{e.sendTransaction?.scanTransaction&&"failed"!==eh||((t,n,a)=>{if($((e=>e?.sendTransaction?"transactionRequest"in e.sendTransaction?0:e.sendTransaction.transactionRequests.length-1:0)(e)),n.isErc20Ish&&n.amount&&a){let e=(0,x.f)({amount:n.amount,decimals:a.decimals});eI(e),ef([{value:e,symbol:a?.symbol,decimals:a?.decimals}])}else if(t.value){let e=BigInt(t.value),n=ej?(0,k.a)(e,ej):void 0;ef(F&&n?[{value:n}]:[{value:(0,k.p)(e),symbol:eM,decimals:18,usdValue:n}])}else ef(F?[{value:"$0"}]:[{value:"0",symbol:eM,decimals:18}])})(eD?.tx??q,ew,V)},[q,eD?.tx,ew,V,eh]),Z)return(0,a.jsx)(L,{txn:eD?.tx??q,onClose:e$,receipt:Z,transactionInfo:e.sendTransaction?.uiOptions.transactionInfo,tokenPrice:ej,tokenSymbol:eM,receiptHeader:e.sendTransaction?.uiOptions.successHeader,receiptDescription:e.sendTransaction?.uiOptions.successDescription});if(ee)return(0,a.jsx)(N.T,{transactionError:ee,transactionHash:K??void 0,chainType:"ethereum",chainId:eD?.tx.chainId??q.chainId,onClose:e$,onRetry:({resetNonce:e})=>{ei(null);let t={...eD?.tx??q};e&&(t.nonce=void 0),U(t)}});let eQ=0!==B&&"number"==typeof O&&0!==O?()=>{R(O-1)}:void 0;return ep&&er?(0,a.jsx)(P,{details:er,onBack:()=>ed(!1)}):(0,a.jsx)(N.S,{transactionIndex:O,onBack:eQ,maxIndex:B,disabled:ez&&!eP||ec,isSubmitting:J,submitError:ee,isPreparing:!eD,isTokenPriceLoading:eA,isTokenContractInfoLoading:!e_&&!V,prepareError:eD?.errors[0],symbol:V?.symbol,chain:ek,img:eJ,title:eH,subtitle:eW,txValue:q.value,fee:eL??eq,isSponsored:H,from:ex??"",to:eN,tokenAddress:eF??void 0,network:A.chains.find(e=>e.id===q.chainId)?.name??"",transactionDetails:{...ew,formattedAmount:ev},cta:eY,missingFunds:ez,action:eE,balance:eG??eV??eU,onClose:e$,onClick:eK?async()=>{if(!ex)return;if(!eP)throw Error("Funding wallet is not enabled");let t="FundingMethodSelectionScreen";n({...e,funding:{...e.funding,methodScreen:t,chainType:"ethereum",amount:(0,p.c)(BigInt(eD?.tx.value??0)+BigInt(eD?.totalGasEstimate?.toString()??0)),chain:ek},solanaFundingData:e?.solanaFundingData}),i(t)}:async()=>{if(O<B)R(O+1);else{z(!0);try{let t=await r.getAccessToken();if(J||!t||!C||!j)return;let n=await e.sendTransaction.onConfirm({transactionRequest:eD?.tx??q});if(Y(n),e.sendTransaction?.signOnly)return await new Promise(e=>setTimeout(e,f.q)),e?.sendTransaction?.onSuccess({hash:n}),_({shouldCallAuthOnSuccess:!1});let a=await eB.waitForTransactionReceipt({hash:n});if("reverted"===a.status)throw Error("Transaction failed");X(a)}catch(e){console.warn({transaction:eD?.tx??q,error:e}),ei(e)}finally{z(!1)}}},validation:el,hasScanDetails:!!er,setIsScanDetailsOpen:ed,preventMaliciousTransaction:ec,setPreventMaliciousTransaction:em,tokensSent:ey,tokensReceived:eb,isScanning:"in progress"===eh,isCancellable:e.sendTransaction?.uiOptions?.isCancellable??!1,functionName:eC})}}},79450:(e,t,n)=>{n.d(t,{E:()=>a});let a=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}]},46953:(e,t,n)=>{n.d(t,{u:()=>l});var a=n(12115),s=n(11326),i=n(96355),r=n(45244),o=n(31679);function l({rpcConfig:e,appId:t,address:n,chain:l}){let{chains:u}=(0,o.u)(),[p,d]=(0,a.useState)(0n),[c,m]=(0,a.useState)(!1),y=(0,a.useMemo)(()=>{let n=l||u[0];if(n)return(0,s.l)({chain:l,transport:(0,i.L)((0,r.a)(n,e,t))})},[l,e,t]),f=(0,a.useCallback)(async()=>{if(!n||!y)return;m(!0);let e=await y.getBalance({address:n}).catch(console.error);return e?(d(e),m(!1),e):void 0},[y,n,d]);return(0,a.useEffect)(()=>{f().catch(console.error)},[]),{balance:p,isLoading:c,reloadBalance:f}}}}]);