(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5820],{56335:(e,t,l)=>{Promise.resolve().then(l.bind(l,73321))},22324:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var s=l(95155),r=l(12115),a=l(21833);let i="0xa6babe18f2318d2880dd7da3126c19536048f8b0";function o(e){let{children:t,requiredQuantity:l=1,includeDelegates:o=!0}=e,n=(0,a.j)(),d=!!(n&&(n.user||n.address||n.isAuthenticated)),{checkTokenGate:c,isTokenGateLoading:u}=(0,a.n)(),[m,h]=(0,r.useState)(null),[x,b]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=!1;return(async()=>{if(!d){h(!1),b(null);return}let t=await c({contractAddress:i,chainId:33139,quantity:l,includeDelegates:o});e||(t.error?(b(t.error),h(!1)):h(!0===t.result))})(),()=>{e=!0}},[d,c,l,o]),null===m||u)?(0,s.jsx)("div",{className:"px-4 py-6 text-sm text-off-white/80",children:"Checking holder access…"}):m?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsxs)("div",{className:"px-4 py-6 border border-white/10 rounded-lg glass-dark",children:[(0,s.jsx)("div",{className:"mb-2 text-off-white/90 font-semibold",children:d?"Holders only":"Sign in to verify access"}),(0,s.jsx)("p",{className:"text-sm text-off-white/70 mb-3",children:d?"You need an Ape from the collection to access this page. ".concat(x?"(".concat(x,")"):""):"Connect and sign in to verify your holder status."}),(0,s.jsxs)("div",{className:"flex gap-3",children:[!d&&(0,s.jsx)("button",{onClick:()=>{var e;null==n||null===(e=n.login)||void 0===e||e.call(n)},className:"px-4 py-2 rounded-lg bg-hero-blue text-black font-semibold hover:bg-hero-blue/90 transition-colors",children:"Sign in"}),(0,s.jsx)("a",{href:"https://opensea.io/assets/ethereum/".concat(i),target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-lg border border-white/20 text-off-white/90 hover:bg-white/10 transition-colors",children:"View collection"})]})]})}},77674:(e,t,l)=>{"use strict";l.d(t,{default:()=>a});var s=l(95155),r=l(5565);function a(e){let{src:t,alt:l,className:a,width:i=800,height:o=800,fill:n=!1,sizes:d="100vw",unoptimized:c=!0,priority:u=!1}=e,m=t||"/placeholder.png";return n?(0,s.jsx)(r.default,{src:m,alt:l,fill:!0,sizes:d,unoptimized:c,className:a,priority:u}):(0,s.jsx)(r.default,{src:m,alt:l,width:i,height:o,sizes:d,unoptimized:c,className:a,priority:u})}l(12115)},73321:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>m});var s=l(95155),r=l(12115),a=l(48173),i=l.n(a),o=l(84941);l(87358);let n=null;var d=l(22324),c=l(77674),u=l(45687);function m(){var e,t;let l=(0,u.u)(),[a,m]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[b,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(null),[v,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[y,S]=(0,r.useState)("fan_art"),[k,C]=(0,r.useState)(!1),[_,E]=(0,r.useState)(null),[I,U]=(0,r.useState)(null),[A,P]=(0,r.useState)(null);(0,r.useEffect)(()=>{var e,t;let s=null==l?void 0:null===(t=l.user)||void 0===t?void 0:null===(e=t.twitter)||void 0===e?void 0:e.username;s&&!h&&x(s)},[null==l?void 0:null===(t=l.user)||void 0===t?void 0:null===(e=t.twitter)||void 0===e?void 0:e.username,h]);let M=e=>{p(e),U(null),P(null),e?g(URL.createObjectURL(e)):g(null)},z=e=>e.replace(/[^a-zA-Z0-9._-]/g,"_"),B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return Math.random().toString(36).slice(2,2+e)},J=async e=>{e.preventDefault(),U(null),C(!0),E(null);try{var t;let e="";if(b){if(!(b.type.startsWith("image/")||b.type.startsWith("video/")))throw Error("Please upload an image or video file.");if(b.size>0x3200000)throw Error("File too large. Max 50MB.");P("Uploading file...");let t=function(){let e="https://bqcrbcpmimfojnjdhvrz.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJxY3JiY3BtaW1mb2puamRodnJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ3MjE1ODEsImV4cCI6MjA4MDI5NzU4MX0.tlDiLyCdrOAULzLH9fv0rm5wpiHqy4nzDvmpC9xXRGw";if(!e||!t)throw Error("Missing Supabase env: NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY");return n||(n=(0,o.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0}}))}(),l="gallery",s=b.name.split(".").pop()||(b.type.startsWith("video/")?"mp4":"png"),r="submissions/".concat(Date.now(),"-").concat(B(),".").concat(z(s)),{error:a}=await t.storage.from(l).upload(r,b,{cacheControl:"3600",upsert:!1,contentType:b.type});if(a){let e="".concat(a.message||"");if(e.toLowerCase().includes("bucket not found"))throw Error('Storage bucket "'.concat(l,'" not found. Create a public bucket named "').concat(l,'" in Supabase Storage or set NEXT_PUBLIC_SUPABASE_BUCKET to your bucket name.'));throw Error(e||"Upload failed")}let{data:i}=t.storage.from(l).getPublicUrl(r);e=i.publicUrl,P("")}let l=await fetch("/api/gallery/submit/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,author:h,image_url:e,art_url:v,twitter_url:w,category:y})}),s=await l.json();if(!l.ok)throw Error((null==s?void 0:s.error)||"Failed to submit");E(null!==(t=s.id)&&void 0!==t?t:null),m(""),x(""),M(null),j(""),N("")}catch(e){U(e instanceof Error?e.message:"Failed to submit")}finally{C(!1)}};return(0,s.jsx)(d.A,{children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",style:{color:"var(--foreground)"},children:"Submit to Gallery"}),(0,s.jsx)(i(),{href:"/gallery",className:"btn-secondary",children:"Back to Gallery"})]}),(0,s.jsxs)("form",{onSubmit:J,className:"max-w-3xl mx-auto rounded-xl border border-white/20 bg-black/60 p-5 space-y-5 shadow-2xl",children:[(0,s.jsx)("p",{className:"text-off-white/80 text-sm",children:"Upload image or video (up to 50MB). PNG/JPG/MP4/WebM recommended."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Title"}),(0,s.jsx)("input",{value:a,onChange:e=>m(e.target.value),required:!0,className:"w-full rounded-md bg-black/40 border border-white/10 p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Author"}),(0,s.jsx)("input",{value:h,onChange:e=>x(e.target.value),className:"w-full rounded-md bg-black/40 border border-white/10 p-2"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-2",children:"Upload Media"}),(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border border-dashed border-white/15 bg-black/40 hover:bg-black/30 transition-colors p-6 cursor-pointer",children:[(0,s.jsx)("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:e=>{var t;return M((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-off-white/80 text-sm",children:"Drag & drop or click to upload"}),(0,s.jsx)("div",{className:"text-off-white/50 text-xs mt-1",children:"PNG, JPG, MP4, WebM — Max 50MB"})]})]}),A&&(0,s.jsx)("p",{className:"text-xs text-off-white/70 mt-2",children:A}),b&&(0,s.jsxs)("p",{className:"text-xs text-off-white/70 mt-2",children:["Selected: ",b.name]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-2",children:"Preview"}),(0,s.jsx)("div",{className:"rounded-lg border border-white/20 bg-black/50 overflow-hidden h-56 flex items-center justify-center",children:f?b&&b.type.startsWith("video/")?(0,s.jsx)("video",{className:"max-h-56 w-auto",src:f,controls:!0,playsInline:!0}):(0,s.jsx)(c.default,{src:f,alt:"preview",className:"max-h-56 w-auto object-contain",width:400,height:224,unoptimized:!0}):(0,s.jsx)("div",{className:"text-off-white/50 text-sm",children:"No media selected"})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Artwork Link (optional)"}),(0,s.jsx)("input",{value:v,onChange:e=>j(e.target.value),className:"w-full rounded-md bg-black/40 border border-white/10 p-2"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"X/Twitter URL (optional)"}),(0,s.jsx)("input",{value:w,onChange:e=>N(e.target.value),className:"w-full rounded-md bg-black/40 border border-white/10 p-2"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Category"}),(0,s.jsxs)("select",{value:y,onChange:e=>S(e.target.value),className:"w-full rounded-md bg-black/40 border border-white/10 p-2",children:[(0,s.jsx)("option",{value:"fan_art",children:"Fan Art"}),(0,s.jsx)("option",{value:"spotlight",children:"Spotlight"})]})]}),(0,s.jsx)("div",{className:"text-xs text-off-white/60 self-end",children:"You confirm rights to share and allow featuring on site/socials."})]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)("button",{type:"submit",disabled:k||!b,className:"btn-primary",children:k?"Submitting...":"Submit"})}),_&&(0,s.jsxs)("p",{className:"text-green-400",children:["Submitted! Pending review. ID: ",_]}),I&&(0,s.jsx)("p",{className:"text-red-400",children:I})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5328,7532,5783,554,5565,9623,4941,8441,1517,7358],()=>t(56335)),_N_E=e.O()}]);