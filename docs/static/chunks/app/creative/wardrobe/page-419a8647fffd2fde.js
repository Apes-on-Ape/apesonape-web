(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{9920:(e,t,a)=>{Promise.resolve().then(a.bind(a,77921))},77674:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var r=a(95155),s=a(5565);function n(e){let{src:t,alt:a,className:n,width:c=800,height:i=800,fill:l=!1,sizes:o="100vw",unoptimized:d=!0,priority:m=!1}=e,u=t||"/placeholder.png";return l?(0,r.jsx)(s.default,{src:u,alt:a,fill:!0,sizes:o,unoptimized:d,className:n,priority:m}):(0,r.jsx)(s.default,{src:u,alt:a,width:c,height:i,sizes:o,unoptimized:d,className:n,priority:m})}a(12115)},77921:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j,dynamic:()=>y});var r=a(95155),s=a(58803),n=a.n(s),c=a(12115),i=a(53344),l=a(48173),o=a.n(l),d=a(82243),m=a(76897),u=a(95059),f=a(38684),h=a(44857),p=a(41956),b=a(36373),x=a(77674);let y="force-dynamic",g=[{id:"santa-hat",name:"Santa Hat",src:"/wardrobe/hats/santa-hat.png",previewSrc:"/wardrobe/hats-preview/santa-hat.png",category:"Hats"},{id:"gm-arm",name:"GM Arm + Mug",src:"/file.svg",category:"Accessories"},{id:"bandolier",name:"Bandolier",src:"/wardrobe/tops/bandolier.png",previewSrc:"/wardrobe/tops-preview/bandolier.png",category:"Tops"},{id:"bone-necklace",name:"Bone Necklace",src:"/wardrobe/tops/bone-necklace.png",previewSrc:"/wardrobe/tops-preview/bone-necklace.png",category:"Tops"},{id:"santavest",name:"Santa Vest",src:"/wardrobe/tops/santavest.png",previewSrc:"/wardrobe/tops-preview/santavest-preview.png",category:"Tops"}],w=["Hats","Tops","Accessories"],v=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");function j(){(0,p.n)("wardrobe");let[e,t]=(0,c.useState)(""),[a,s]=(0,c.useState)(!1),[l,y]=(0,c.useState)(""),[j,k]=(0,c.useState)("Hats"),[N,S]=(0,c.useState)(new Set),[A,T]=(0,c.useState)(null),[E,F]=(0,c.useState)(!1),[C,I]=(0,c.useState)(!1),[M,z]=(0,c.useState)(null),B=(0,c.useRef)(null),[D,P]=(0,c.useState)(!0),U=(0,c.useMemo)(()=>["Black","Blue","Brown","Cheetah","Cream","Dark Brown","Death Bot","Dmt","Golden Brown","Gray","Noise","Pink","Red","Robot","Solid Gold","Tan","Trippy","White","Zombie"],[]),[R,L]=(0,c.useState)("Brown"),O=(0,c.useCallback)(e=>{if("gm-arm"===e){P(e=>!e);return}S(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},[]),G=(0,c.useCallback)(e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let r=URL.createObjectURL(a);y(r),T(null),z(null);let s=new window.Image;s.onload=()=>{(4096!==s.naturalWidth||4096!==s.naturalHeight)&&T("Tip: For best results, use a 4096\xd74096 image.")},s.src=r},[]),W=(0,c.useCallback)(async()=>{if(e.trim()&&!a){s(!0),T(null);try{if(!/^\d+$/.test(e.trim())){T("Please enter a numeric token ID (e.g., 1234).");return}let t=await b.A.getNFTByTokenId(e.trim());if(!t){T("Token not found. Check the ID and try again.");return}y(t.image),z(null);let a=t.traits.find(e=>"fur"===e.name.toLowerCase());a&&U.includes(a.value)&&L(a.value)}catch(e){console.error("Load NFT error:",e),T("Failed to load NFT. Try again.")}finally{s(!1)}}},[e,a,U]);(0,c.useEffect)(()=>{function e(){B.current&&(B.current.muted=!0,B.current.play().catch(()=>{}),B.current.pause(),B.current.currentTime=0,B.current.muted=!1,window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",e))}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",e),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",e)}},[]);let H=(0,c.useCallback)(e=>"/wardrobe/gm-arm/".concat(v(e),".png"),[]),[_,$]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!D){$(!1);return}let e=H(R),t=new window.Image;t.onload=()=>$(!0),t.onerror=()=>$(!1),t.src=e},[D,R,H]);let q=(0,c.useCallback)(async()=>{if(!l)return null;let e=document.createElement("canvas");e.width=4096,e.height=4096;let t=e.getContext("2d");if(!t)return null;let a=e=>new Promise((t,a)=>{let r=new window.Image;r.crossOrigin="anonymous",r.onload=()=>t(r),r.onerror=a,r.src=e}),r=await a(l);for(let e of(t.drawImage(r,0,0,r.naturalWidth||r.width,r.naturalHeight||r.height,0,0,4096,4096),g.filter(e=>N.has(e.id)))){if("gm-arm"===e.id)continue;let r=await a(e.src);t.drawImage(r,0,0,r.naturalWidth||r.width,r.naturalHeight||r.height,0,0,4096,4096)}if(D)try{let e=await a(H(R));t.drawImage(e,0,0,e.naturalWidth||e.width,e.naturalHeight||e.height,0,0,4096,4096)}catch(e){}return e.toDataURL("image/png")},[l,N,D,R,H]),J=(0,c.useCallback)(async()=>{if(l&&!E){F(!0),I(!1);try{if(B.current)try{B.current.currentTime=0,await B.current.play()}catch(e){}let e=await q();await new Promise(e=>setTimeout(e,350)),z(e),I(!0),setTimeout(()=>I(!1),300)}finally{if(F(!1),B.current)try{B.current.pause(),B.current.currentTime=0}catch(e){}}}},[l,q,E]),V=(0,c.useCallback)(async()=>{if(!l)return;let e=M||await q();if(!e)return;let t=document.createElement("a");t.href=e,t.download="ape-wardrobe.png",t.click()},[l,M,q]),Z=g.filter(e=>e.category===j);return(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 min-h-screen relative",children:[(0,r.jsx)("div",{"aria-hidden":"true",style:{background:"radial-gradient(1200px 600px at 20% 10%, rgba(0,255,200,0.08), transparent 60%), radial-gradient(1000px 500px at 80% 20%, rgba(0,200,255,0.06), transparent 60%), linear-gradient(180deg, #02060B 0%, #070B12 50%, #0B0F17 100%)"},className:"jsx-bc865efc86f249c1 pointer-events-none absolute inset-0 -z-10"}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 pointer-events-none absolute inset-0 -z-10 overflow-hidden",children:[(0,r.jsx)("div",{style:{animation:"smokeDrift 22s linear infinite",background:"radial-gradient(60% 60% at 50% 50%, rgba(180,200,210,0.12), transparent 70%)"},className:"jsx-bc865efc86f249c1 absolute -inset-x-1/4 top-0 h-1/2 opacity-30 blur-2xl"}),(0,r.jsx)("div",{style:{animation:"smokeDrift 28s linear infinite reverse",background:"radial-gradient(60% 60% at 50% 50%, rgba(200,220,230,0.10), transparent 70%)"},className:"jsx-bc865efc86f249c1 absolute -inset-x-1/4 bottom-0 h-1/2 opacity-25 blur-2xl"})]}),(0,r.jsx)(d.default,{}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 pb-12",children:[(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-hero-blue/10 border border-hero-blue/30 mb-3",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 text-hero-blue"}),(0,r.jsx)("span",{className:"jsx-bc865efc86f249c1 text-xs text-hero-blue",children:"Wardrobe"})]}),(0,r.jsx)("h1",{style:{color:"var(--foreground)"},className:"jsx-bc865efc86f249c1 text-3xl md:text-4xl font-bold",children:"Mad Lab Wardrobe"}),(0,r.jsx)("p",{className:"jsx-bc865efc86f249c1 text-off-white/80 mt-2 max-w-2xl",children:"Step into the scientist’s workshop. Upload a 4096\xd74096 Ape, select overlays, then generate with a flash of chaotic genius."})]}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 glass-dark rounded-xl p-4 border border-white/10 space-y-4",children:[(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1",children:[(0,r.jsx)("label",{style:{color:"var(--foreground)"},className:"jsx-bc865efc86f249c1 block text-sm mb-2",children:"Ape Token ID"}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 flex gap-2",children:[(0,r.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"e.g. 1234",className:"jsx-bc865efc86f249c1 flex-1 rounded-md bg-black/30 border border-white/10 px-3 py-2 text-sm outline-none focus:ring-2 ring-hero-blue/40"}),(0,r.jsx)("button",{onClick:W,disabled:!e.trim()||a,className:"jsx-bc865efc86f249c1 btn-secondary whitespace-nowrap",children:a?"Loading…":"Load NFT"})]}),(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-xs text-off-white/60 mt-2",children:"Loads image and traits from IPFS via tokenURI."}),A&&(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-xs text-red-400 mt-2",children:A})]}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 border-t border-white/10 pt-3",children:[(0,r.jsx)("label",{style:{color:"var(--foreground)"},className:"jsx-bc865efc86f249c1 block text-sm mb-2",children:"Or upload 4096\xd74096 image"}),(0,r.jsxs)("label",{className:"jsx-bc865efc86f249c1 btn-secondary inline-flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)(f.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"jsx-bc865efc86f249c1",children:"Upload Ape"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:G,className:"jsx-bc865efc86f249c1 hidden"})]}),(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-xs text-off-white/60 mt-2",children:"Recommended: 4096\xd74096 PNG with transparency."}),A&&(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-xs text-off-white/60 mt-2",children:A})]}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 border-t border-white/10 pt-3",children:[(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 flex items-center gap-2 mb-3",children:w.map(e=>(0,r.jsx)("button",{onClick:()=>k(e),className:"jsx-bc865efc86f249c1 "+"px-3 py-1.5 rounded-md text-sm border ".concat(j===e?"border-hero-blue/50 bg-hero-blue/10":"border-white/10 hover:bg-white/10"),children:e},e))}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 grid grid-cols-2 gap-2",children:[0===Z.length&&(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-sm text-off-white/60 col-span-2",children:"No items yet."}),Z.map(e=>{let t="gm-arm"===e.id?D:N.has(e.id);return(0,r.jsxs)("button",{onClick:()=>O(e.id),title:e.name,className:"jsx-bc865efc86f249c1 "+"relative rounded-lg border p-2 text-left transition-colors ".concat(t?"border-hero-blue/60 bg-hero-blue/10":"border-white/10 hover:bg-white/10"),children:[(0,r.jsx)(x.default,{src:e.previewSrc||e.src,alt:e.name,className:"w-full aspect-square object-contain rounded-md bg-black/30",width:512,height:512,unoptimized:!0}),(0,r.jsx)("div",{style:{color:"var(--foreground)"},className:"jsx-bc865efc86f249c1 mt-2 text-xs",children:e.name}),t&&(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 absolute top-2 right-2 text-hero-blue text-xs",children:"Selected"})]},e.id)})]})]}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 flex gap-3",children:[(0,r.jsx)("button",{onClick:J,disabled:!l||E,className:"jsx-bc865efc86f249c1 btn-secondary flex-1 inline-flex items-center justify-center gap-2 disabled:opacity-50",children:E?"Generating...":"Generate Preview"}),(0,r.jsxs)("button",{onClick:V,disabled:!l,className:"jsx-bc865efc86f249c1 btn-primary flex-1 inline-flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,r.jsx)(h.A,{className:"w-5 h-5"})," Download PNG"]})]}),(0,r.jsx)("button",{onClick:()=>z(null),disabled:!M,className:"jsx-bc865efc86f249c1 w-full inline-flex items-center justify-center gap-2 text-xs opacity-60 hover:opacity-100 transition",children:"Reset preview"})]}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 lg:col-span-2",children:[(0,r.jsxs)("div",{style:{width:"100%",aspectRatio:"1 / 1"},className:"jsx-bc865efc86f249c1 relative rounded-xl border border-white/10 overflow-hidden",children:[(0,r.jsx)("div",{"aria-hidden":"true",style:{background:"radial-gradient(65% 65% at 50% 40%, rgba(10,30,45,0.9), rgba(6,12,20,0.95) 60%, rgba(2,6,11,1) 100%)"},className:"jsx-bc865efc86f249c1 absolute inset-0"}),(0,r.jsxs)("div",{className:"jsx-bc865efc86f249c1 absolute inset-0 pointer-events-none",children:[(0,r.jsx)("div",{style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.15) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.15) 1px, transparent 1px)",backgroundSize:"32px 32px"},className:"jsx-bc865efc86f249c1 absolute inset-0 opacity-[0.05]"}),(0,r.jsx)("div",{style:{boxShadow:"inset 0 0 80px rgba(0,255,220,0.08), 0 0 40px rgba(0,200,255,0.06)"},className:"jsx-bc865efc86f249c1 absolute inset-2 rounded-xl"}),(0,r.jsx)("div",{style:{animation:"smokeDrift 18s linear infinite",background:"radial-gradient(50% 50% at 50% 50%, rgba(210,230,240,0.10), transparent 70%)"},className:"jsx-bc865efc86f249c1 absolute -inset-x-1/3 -top-4 h-1/2 opacity-25 blur-2xl"}),(0,r.jsx)("div",{style:{animation:"smokeDrift 26s linear infinite reverse",background:"radial-gradient(50% 50% at 50% 50%, rgba(210,230,240,0.08), transparent 70%)"},className:"jsx-bc865efc86f249c1 absolute -inset-x-1/3 -bottom-4 h-1/2 opacity-2 blur-2xl"})]}),l?(0,r.jsx)(r.Fragment,{children:M?(0,r.jsx)(x.default,{src:M,alt:"Generated Preview",className:"absolute inset-0 w-full h-full object-contain",fill:!0,unoptimized:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.default,{src:l,alt:"Base Ape",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",fill:!0,unoptimized:!0}),g.filter(e=>N.has(e.id)).map(e=>(0,r.jsx)(x.default,{src:e.src,alt:e.name,className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",fill:!0,unoptimized:!0,sizes:"100vw"},e.id)),D&&_&&(0,r.jsx)(x.default,{src:H(R),alt:"GM Arm",className:"absolute inset-0 w-full h-full object-contain pointer-events-none select-none",fill:!0,unoptimized:!0,sizes:"100vw"})]})}):(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 absolute inset-0 flex items-center justify-center text-off-white/60 text-sm p-4",children:"Enter a token ID or upload your Ape image to start."}),E&&(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 px-4 py-2 rounded-md border border-white/10 bg-black/60 text-off-white/90 text-sm",children:"Assembling in the workshop..."})}),C&&(0,r.jsx)("div",{style:{background:"rgba(255,255,255,0.95)",animation:"flashPop 300ms ease-out forwards"},className:"jsx-bc865efc86f249c1 absolute inset-0 pointer-events-none"})]}),(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 text-xs text-off-white/60 mt-2",children:"The lab composes selected clothes as full-size overlays aligned to the base image."})]})]}),(0,r.jsx)("div",{className:"jsx-bc865efc86f249c1 mt-8",children:(0,r.jsx)(o(),{href:"/creative",className:"btn-secondary",children:"Back to Creative Hub"})})]}),(0,r.jsx)(m.A,{}),(0,r.jsx)("audio",{ref:B,src:"/mechanic-workshop.mp3",preload:"auto",className:"jsx-bc865efc86f249c1"}),(0,r.jsx)(n(),{id:"bc865efc86f249c1",children:"@-webkit-keyframes smokeDrift{0%{-webkit-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}50%{-webkit-transform:translatex(10%)translatey(-2%);transform:translatex(10%)translatey(-2%)}100%{-webkit-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}}@-moz-keyframes smokeDrift{0%{-moz-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}50%{-moz-transform:translatex(10%)translatey(-2%);transform:translatex(10%)translatey(-2%)}100%{-moz-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}}@-o-keyframes smokeDrift{0%{-o-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}50%{-o-transform:translatex(10%)translatey(-2%);transform:translatex(10%)translatey(-2%)}100%{-o-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}}@keyframes smokeDrift{0%{-webkit-transform:translatex(-10%)translatey(0%);-moz-transform:translatex(-10%)translatey(0%);-o-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}50%{-webkit-transform:translatex(10%)translatey(-2%);-moz-transform:translatex(10%)translatey(-2%);-o-transform:translatex(10%)translatey(-2%);transform:translatex(10%)translatey(-2%)}100%{-webkit-transform:translatex(-10%)translatey(0%);-moz-transform:translatex(-10%)translatey(0%);-o-transform:translatex(-10%)translatey(0%);transform:translatex(-10%)translatey(0%)}}@-webkit-keyframes flashPop{0%{opacity:1}100%{opacity:0}}@-moz-keyframes flashPop{0%{opacity:1}100%{opacity:0}}@-o-keyframes flashPop{0%{opacity:1}100%{opacity:0}}@keyframes flashPop{0%{opacity:1}100%{opacity:0}}"})]})}},41956:(e,t,a)=>{"use strict";a.d(t,{n:()=>n});var r=a(12115),s=a(21833);function n(e){var t;let a=(0,s.j)(),n=(null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.id)||"",c=(0,r.useRef)(!1);(0,r.useEffect)(()=>{n&&e&&!c.current&&(c.current=!0)},[n,e])}},36373:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});class r{getEvmContractAddress(){return"0xa6bAbE18F2318D2880DD7dA3126C19536048F8B0".trim()||"0xa6bAbE18F2318D2880DD7dA3126C19536048F8B0"}getApechainRpcUrl(){return"https://rpc.apechain.com/http".trim()||"https://rpc.apechain.com/http"}async getCollectionInfo(){try{let e=await fetch("".concat(this.baseUrl,"/collections/").concat(this.collectionSymbol));if(!e.ok)throw Error("Failed to fetch collection info: ".concat(e.statusText));let t=await e.json();return{symbol:t.symbol,name:t.name,description:t.description,image:t.image,totalSupply:t.totalSupply,floorPrice:t.floorPrice,volume24h:t.volume24h,volume7d:t.volume7d,volume30d:t.volume30d,marketCap:t.marketCap}}catch(e){throw console.error("Error fetching collection info:",e),e}}async getNFTs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{let a=await fetch("".concat(this.baseUrl,"/collections/").concat(this.collectionSymbol,"/tokens?limit=").concat(e,"&offset=").concat(t));if(!a.ok)throw Error("Failed to fetch NFTs: ".concat(a.statusText));return(await a.json()).tokens.map(e=>({id:e.mint,name:e.name||"Ape On Ape #".concat(e.tokenId),image:e.image,price:e.price||0,currency:e.currency||"APE",rarity:e.rarity||Math.floor(1e3*Math.random())+1,traits:this.normalizeAttributes(e.attributes||[]),magicEdenUrl:"https://magiceden.us/item-details/".concat(e.mint),owner:e.owner,lastSale:e.lastSale?{price:e.lastSale.price,currency:e.lastSale.currency,date:e.lastSale.date}:void 0}))}catch(t){return console.error("Error fetching NFTs:",t),this.getMockNFTs(e)}}async getRandomNFTs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;try{let t=(await this.getCollectionInfo()).totalSupply,a=Array.from({length:e},()=>Math.floor(Math.random()*Math.max(1,t-e))).map(e=>this.getNFTs(1,e));return(await Promise.all(a)).flat()}catch(t){return console.error("Error fetching random NFTs:",t),this.getMockNFTs(e)}}async getNFTById(e){try{if(/^\d+$/.test(e)){let t=await this.getEvmNFTByTokenId(e);if(t)return t}let t=["".concat(this.baseUrl,"/tokens/").concat(e),"https://api-mainnet.magiceden.io/v2/tokens/".concat(e)],a=null;for(let e of t)try{let t=await fetch(e,{headers:{accept:"application/json"}});if(t.ok){a=await t.json();break}}catch(e){}if(!a)return null;return{id:a.mint,name:a.name||"Ape On Ape #".concat(a.tokenId),image:a.image,price:a.price||0,currency:a.currency||"APE",rarity:a.rarity||Math.floor(1e3*Math.random())+1,traits:this.normalizeAttributes(a.attributes||[]),magicEdenUrl:"https://magiceden.us/item-details/".concat(a.mint),owner:a.owner,lastSale:a.lastSale?{price:a.lastSale.price,currency:a.lastSale.currency,date:a.lastSale.date}:void 0}}catch(e){return console.error("Error fetching NFT by ID:",e),null}}async getNFTByTokenId(e){return/^\d+$/.test(e)?this.getEvmNFTByTokenId(e):null}async getEvmNFTByTokenId(e){let t;let a=this.getEvmContractAddress(),r=this.getApechainRpcUrl();if(!a||!r)return null;let s=BigInt(e).toString(16).padStart(64,"0");try{let e=await fetch(r,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Math.floor(1e6*Math.random()),method:"eth_call",params:[{to:a,data:"0xc87b56dd"+s},"latest"]})});t=await e.json()}catch(e){return null}if(!t.result||"0x"===t.result)return null;let n=this.decodeAbiString(t.result);if(!n)return null;let c=this.normalizeIpfsUrl(n),i=String(e),l=[],o=c.replace("{id}",i).replace("{tokenId}",i).replace("{token_id}",i);o!==c&&l.push(o);let d=(()=>{try{return new URL(c).pathname}catch(e){return c}})().split("/").pop()||"",m=d.includes(".")&&!d.endsWith(".");if(l.push(c),!m){let e=c.endsWith("/")?"":"/";l.push("".concat(c).concat(e).concat(i,".json")),l.push("".concat(c).concat(e).concat(i))}let u=null;for(let e of l)try{let t=await fetch(e,{headers:{accept:"application/json"}});if(t.ok){u=await t.json();break}}catch(e){}if(!u)return null;let f=this.normalizeIpfsUrl(u.image||u.image_url||u.imageUrl||""),h=u.name||"Ape On Ape #".concat(e);return{id:"".concat(a,":").concat(e),name:h,image:f,price:0,currency:"APE",rarity:Math.floor(1e3*Math.random())+1,traits:this.normalizeAttributes(u.attributes||[]),magicEdenUrl:"https://magiceden.us/item-details/apechain/".concat(a,"/").concat(e),owner:""}}decodeAbiString(e){try{let t=e.startsWith("0x")?e.slice(2):e,a=t.slice(64,128),r=parseInt(a,16),s=t.slice(128,128+2*r),n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=parseInt(s.slice(2*e,2*e+2),16);return new TextDecoder().decode(n)}catch(e){return null}}normalizeIpfsUrl(e){if(!e)return e;if(e.startsWith("ipfs://")){let t=e.replace("ipfs://","");return"https://gateway.pinata.cloud/ipfs/".concat(t)}let t=e.indexOf("/ipfs/");return -1!==t?"https://gateway.pinata.cloud".concat(e.slice(t)):e}normalizeAttributes(e){return Array.isArray(e)?e.filter(e=>"string"==typeof(null==e?void 0:e.value)).map(e=>({name:e.name||e.trait_type||"Trait",value:e.value,rarity:"number"==typeof e.rarity?e.rarity:0})):[]}async searchNFTs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;try{let a=await fetch("".concat(this.baseUrl,"/collections/").concat(this.collectionSymbol,"/tokens?search=").concat(encodeURIComponent(e),"&limit=").concat(t));if(!a.ok)throw Error("Failed to search NFTs: ".concat(a.statusText));return(await a.json()).tokens.map(e=>({id:e.mint,name:e.name||"Ape On Ape #".concat(e.tokenId),image:e.image,price:e.price||0,currency:e.currency||"APE",rarity:e.rarity||Math.floor(1e3*Math.random())+1,traits:e.attributes||[],magicEdenUrl:"https://magiceden.us/item-details/".concat(e.mint),owner:e.owner,lastSale:e.lastSale?{price:e.lastSale.price,currency:e.lastSale.currency,date:e.lastSale.date}:void 0}))}catch(e){return console.error("Error searching NFTs:",e),this.getMockNFTs(t)}}getMockNFTs(e){let t=[{name:"Fur",value:"Golden",rarity:10},{name:"Fur",value:"Silver",rarity:25},{name:"Fur",value:"Blue",rarity:50},{name:"Fur",value:"Red",rarity:100},{name:"Eyes",value:"Blue",rarity:30},{name:"Eyes",value:"Green",rarity:40},{name:"Eyes",value:"Red",rarity:20},{name:"Eyes",value:"Purple",rarity:10},{name:"Accessory",value:"Crown",rarity:5},{name:"Accessory",value:"Chain",rarity:15},{name:"Accessory",value:"Hat",rarity:30},{name:"Accessory",value:"None",rarity:50},{name:"Background",value:"Space",rarity:20},{name:"Background",value:"Forest",rarity:30},{name:"Background",value:"City",rarity:25},{name:"Background",value:"Ocean",rarity:25}];return Array.from({length:e},(e,a)=>{let r=t.sort(()=>Math.random()-.5).slice(0,Math.floor(4*Math.random())+2);return{id:"mock-".concat(a+1),name:"Ape On Ape #".concat(a+1),image:"/AoA-placeholder-apecoinblue.jpg",price:10*Math.random()+.1,currency:"APE",rarity:Math.floor(1e3*Math.random())+1,traits:r,magicEdenUrl:"https://magiceden.us/collections/apechain/0xa6bAbE18F2318D2880DD7dA3126C19536048F8B0/".concat(a+1),owner:"0x".concat(Math.random().toString(16).substr(2,40)),lastSale:Math.random()>.5?{price:5*Math.random()+.1,currency:"APE",date:new Date(Date.now()-2592e6*Math.random()).toISOString()}:void 0}})}constructor(){this.baseUrl="https://api-mainnet.magiceden.dev/v2",this.collectionSymbol="apes-on-apechain"}}let s=new r}},e=>{var t=t=>e(e.s=t);e.O(0,[5328,7532,5783,2362,554,5565,9623,7672,3867,7554,2771,8441,1517,7358],()=>t(9920)),_N_E=e.O()}]);