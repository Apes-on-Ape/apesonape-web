"use strict";exports.id=4243,exports.ids=[4243],exports.modules={44243:(e,s,r)=>{r.r(s),r.d(s,{EmbeddedWalletPasswordUpdateScreen:()=>c,default:()=>c});var t=r(45512),a=r(58009),o=r(37782),d=r(8601),n=r(76284),l=r(32884),i=r(32914);r(5327),r(7623),r(61889),r(51814),r(15494),r(25284);let c={component:()=>{let[e,s]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),[w,y]=(0,a.useState)(null),[u,v]=(0,a.useState)(""),{authenticated:p,user:g}=(0,o.u)(),{client:h,walletProxy:m,refreshSessionAndUser:_,closePrivyModal:f,createAnalyticsEvent:M}=(0,n.u)(),{navigate:R,data:b,onUserCloseViaDialogOrKeybindRef:P}=(0,o.a)(),A=(0,d.u)(),{onSuccess:S,onFailure:x}=b.setWalletPassword,E=(0,o.g)(g),C="user-passcode"===e?.recoveryMethod,N="user-passcode"===E?.recoveryMethod;(0,a.useEffect)(()=>{p||(R("LandingScreen"),x(new n.m("User must be authenticated before setting a password on a Privy wallet")))},[p]);let I=()=>(w?x(w):C?S(e):x(new n.l("Exited before password was added to wallet")),void f({shouldCallAuthOnSuccess:!1}));return P.current=I,(0,t.jsx)(i.S,{appName:A?.name||"privy",config:{initiatedBy:"user",onCancel:I},error:w?"An error has occurred, please try again.":void 0,buttonLoading:r,buttonHideAnimations:!1,password:u,isResettingPassword:N,onPasswordGenerate:()=>v((0,i.g)()),onPasswordChange:v,onSubmit:async()=>{C?(S(e),f({shouldCallAuthOnSuccess:!1})):(c(!0),y(null),await (async()=>{let e=await h.getAccessToken();if(e&&g&&E?.address&&u&&m)try{M({eventName:"embedded_wallet_set_recovery_started",payload:{walletAddress:E.address,existingRecoveryMethod:E.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:N}});let{entropyId:r,entropyIdVerifier:t}=(0,l.g)(g);if(!(await m.setRecovery({accessToken:e,entropyId:r,entropyIdVerifier:t,recoveryPassword:u,recoveryMethod:"user-passcode"})).entropyId)return y(new n.l("Error setting password on privy wallet")),void M({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:E.address,existingRecoveryMethod:E.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:N,reason:"error setting password"}});let a=await _(),d=(0,o.g)(a);if(!d)return y(new n.l("Error setting password on privy wallet")),void M({eventName:"embedded_wallet_set_recovery_failed",payload:{walletAddress:E.address,existingRecoveryMethod:E.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:N,reason:"wallet disconnected"}});s(d),M({eventName:"embedded_wallet_set_recovery_completed",payload:{walletAddress:E.address,existingRecoveryMethod:E.recoveryMethod,targetRecoveryMethod:"user-passcode",isResettingPassword:N}})}catch(e){console.warn(e),y(e instanceof Error?e:Error("Error setting password on privy wallet")),M({eventName:"embedded_wallet_set_password_failed",payload:{walletAddress:E.address,reason:e}})}})(),c(!1))},onClose:I})}}}};