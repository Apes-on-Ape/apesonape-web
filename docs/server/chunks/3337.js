"use strict";exports.id=3337,exports.ids=[3337],exports.modules={83337:(e,t,r)=>{r.r(t),r.d(t,{MfaVerifyFlowScreen:()=>i,default:()=>i});var s=r(45512),o=r(58009),l=r(37782),n=r(10721),a=r(91468);r(5327),r(61889),r(7623),r(25998),r(88527);let i=({onClose:e})=>{let{user:t}=(0,l.u)(),[r,i]=(0,o.useState)(t?.mfaMethods[0]??null),{init:u,cancel:c,submit:f}=(0,n.u)(),[d,h]=(0,o.useState)(!1),[m,y]=(0,o.useState)(null),[k,S]=(0,o.useState)();(0,o.useEffect)(()=>{i(t?.mfaMethods[0]??null)},[t?.mfaMethods]);let v=(0,o.useRef)(!1);async function w(t){S(void 0);try{if(!t||!r)return;await f(r,t),h(!0),S(void 0),e()}catch(e){throw(0,a.t)(e).error}}async function g(t){if("passkey"!==t)try{i(t),await u(t)}catch(e){console.error(e)}else try{i(t);let r=await u(t);if(!r)throw Error("something went wrong");y(r),await f(t,r),h(!0),S(void 0),e()}catch(e){S((0,a.t)(e))}}(0,o.useEffect)(()=>{!v.current&&r&&(v.current=!0,g(r).finally(()=>{v.current=!1}))},[]);let p=()=>{i(null),S(void 0),c(),e()};return t?"passkey"===r?(0,s.jsx)(a.V,{account:t.linkedAccounts.filter(e=>"passkey"===e.type&&e.enrolledInMfa).sort((e,t)=>t.firstVerifiedAt.valueOf()-e.firstVerifiedAt.valueOf())[0],submitSuccess:d,hasBlockingError:k?.isBlocking??!1,error:k?.error,onClose:p,onBack:()=>{i(null),S(void 0)},handleSubmit:()=>w(m).catch(S)}):r?(0,s.jsx)(a.a,{submitSuccess:d,hasBlockingError:k?.isBlocking??!1,handleSubmitCode:w,selectedMethod:r,onClose:p,onBack:t.mfaMethods.length>1?()=>i(null):void 0}):(0,s.jsx)(a.b,{user:t,onSelect:g,handleClose:p}):null}}};