"use strict";exports.id=3216,exports.ids=[3216],exports.modules={93216:(e,t,r)=>{r.r(t),r.d(t,{EmbeddedWalletPasswordCreateScreen:()=>u,default:()=>u});var a=r(45512),s=r(58009),o=r(8601),l=r(10721),n=r(76284),c=r(47564),i=r(37782),d=r(32914);r(5327),r(61889),r(7623),r(25998),r(88527),r(51814),r(15494),r(25284);let u={component:()=>{let{navigate:e,data:t,onUserCloseViaDialogOrKeybindRef:r}=(0,i.a)(),u=(0,o.u)(),[h,w]=(0,s.useState)(""),[y,v]=(0,s.useState)(!1),[p,f]=(0,s.useState)(),[S,m]=(0,s.useState)(null),{create:g}=(0,c.u)(),{authenticated:P,user:U}=(0,i.u)(),{closePrivyModal:x,isNewUserThisSession:b,initializeWalletProxy:C}=(0,n.u)(),{onSuccess:T,onFailure:A,callAuthOnSuccessOnClose:E,shouldCreateEth:I,shouldCreateSol:M}=t.createWallet,[O,W]=(0,s.useState)(null),k=new l.R(async()=>{try{let t;if(I&&M)t=await g({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"ethereum",walletIndex:0,latestUser:U}),t=await g({chainType:"solana",walletIndex:0,latestUser:t.user});else if(M)t=await g({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"solana",walletIndex:0,latestUser:U});else{if(!I)throw Error("Invalid args to create wallet");t=await g({recoveryMethod:"user-passcode",recoveryPassword:p,chainType:"ethereum",walletIndex:0,latestUser:U})}W(t),b?e("EmbeddedWalletCreatedScreen"):(T(t),x({shouldCallAuthOnSuccess:E}))}catch(e){w(e.message)}});return(0,s.useEffect)(()=>{S||C(3e4).then(e=>m(e))},[S]),(0,s.useEffect)(()=>{if(!P||!U)return e("LandingScreen"),void A(Error("User must be authenticated before creating a Privy wallet"))},[P]),r.current=()=>null,(0,a.jsx)(d.S,{config:{initiatedBy:"automatic"},appName:u?.name||"privy",loading:!S,buttonLoading:y,buttonHideAnimations:!O&&y,isResettingPassword:!1,error:h,password:p||"",onClose:()=>{O&&"user-passcode"!==O.account.recoveryMethod?(A(new n.l("User created a wallet but failed to set a password for it")),x({shouldCallAuthOnSuccess:!1})):O?(T(O),x({shouldCallAuthOnSuccess:E})):(A(new n.l("User wallet creation failed")),x({shouldCallAuthOnSuccess:!1}))},onPasswordChange:f,onPasswordGenerate:()=>f((0,d.g)()),onSubmit:async()=>(v(!0),k.execute().then(()=>new Promise(e=>setTimeout(e,250))).finally(()=>v(!1)))})}}},47564:(e,t,r)=>{r.d(t,{u:()=>l});var a=r(64179),s=r(8601),o=r(76284);let l=()=>{let{walletProxy:e,recoverEmbeddedWallet:t,setUser:r,refreshSessionAndUser:l,privy:n,client:c}=(0,o.u)(),i=(0,s.u)();return{create:async({walletIndex:s,chainType:o,latestUser:d,recoveryMethod:u,recoveryPassword:h,recoveryAccessToken:w})=>{let y=d;y||(y=await l());let v=await c.getAccessToken();if(!y||!v||!e)throw Error("User must be authenticated before creating a Privy wallet");return await (0,a.g)({appConfig:i,user:y,refreshSessionAndUser:l,privy:n,accessToken:v,proxy:e,recoverEmbeddedWallet:t,setUser:r,walletIndex:s,chainType:o,recoveryMethod:u,recoveryPassword:h,recoveryAccessToken:w})}}}}};